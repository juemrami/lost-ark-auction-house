{"version":3,"sources":["../webpack/bootstrap","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","tools/optimizeSync.js","tools/optimizer.worker.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_arrayLikeToArray","arr","len","length","arr2","Array","_unsupportedIterableToArray","minLen","toString","slice","constructor","from","test","_createForOfIteratorHelper","allowArrayLike","it","iterator","isArray","F","done","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","_defineProperty","obj","configurable","writable","_slicedToArray","_arr","_n","_d","undefined","_s","_i","push","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","target","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","estateBuffMap","optimizeSync","Data","task","options","prices","item","items","quality","itemQuality","level","common","enhanceCommon","boost","enhanceBoost","commonM","match","buffType","chance","expDiscount","mats","additive","mat","id","cost","rate","limit","max","mat4","special","enhanceMaterial","find","mat4fx","effects","fx","type","attemptCost","entries","money","amount","stepsFull","n0","n1","n2","n3","Math","min","additiveMax","mat0","mat1","mat2","mat3","steps","map","Boolean","honing","guaranteedResult","nextChance","maxAttempts","failMax","ceil","failBonus","cache","compute","attempts","failureTotal","threshold","pos","optimal","success","failure","failureChance","_compute","result","fails","floor","blessing","out","curChance","cur","_mat","luck","prevQuality","prevCommon","feedExp","exp","feedAmount","feed","feedType","feedSubType","feedSubCost","worker","self","pending","process","data","postMessage","action","addEventListener","payload","splice"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,qBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,sDAIjBlC,EAAoBA,EAAoBmC,EAAI,G,+BClFtC,SAASC,EAAkBC,EAAKC,IAClC,MAAPA,GAAeA,EAAMD,EAAIE,UAAQD,EAAMD,EAAIE,QAE/C,IAAK,IAAInC,EAAI,EAAGoC,EAAO,IAAIC,MAAMH,GAAMlC,EAAIkC,EAAKlC,IAC9CoC,EAAKpC,GAAKiC,EAAIjC,GAGhB,OAAOoC,ECNM,SAASE,EAA4B7B,EAAG8B,GACrD,GAAK9B,EAAL,CACA,GAAiB,kBAANA,EAAgB,OAAO,EAAiBA,EAAG8B,GACtD,IAAId,EAAIf,OAAOkB,UAAUY,SAASrC,KAAKM,GAAGgC,MAAM,GAAI,GAEpD,MADU,WAANhB,GAAkBhB,EAAEiC,cAAajB,EAAIhB,EAAEiC,YAAYnC,MAC7C,QAANkB,GAAqB,QAANA,EAAoBY,MAAMM,KAAKlC,GACxC,cAANgB,GAAqB,2CAA2CmB,KAAKnB,GAAW,EAAiBhB,EAAG8B,QAAxG,GCNa,SAASM,EAA2BpC,EAAGqC,GACpD,IAAIC,EAEJ,GAAsB,qBAAXhC,QAAgD,MAAtBN,EAAEM,OAAOiC,UAAmB,CAC/D,GAAIX,MAAMY,QAAQxC,KAAOsC,EAAK,EAA2BtC,KAAOqC,GAAkBrC,GAAyB,kBAAbA,EAAE0B,OAAqB,CAC/GY,IAAItC,EAAIsC,GACZ,IAAI/C,EAAI,EAEJkD,EAAI,aAER,MAAO,CACLnB,EAAGmB,EACHzB,EAAG,WACD,OAAIzB,GAAKS,EAAE0B,OAAe,CACxBgB,MAAM,GAED,CACLA,MAAM,EACNlC,MAAOR,EAAET,OAGboD,EAAG,SAAWC,GACZ,MAAMA,GAERC,EAAGJ,GAIP,MAAM,IAAIK,UAAU,yIAGtB,IAEIC,EAFAC,GAAmB,EACnBC,GAAS,EAEb,MAAO,CACL3B,EAAG,WACDgB,EAAKtC,EAAEM,OAAOiC,aAEhBvB,EAAG,WACD,IAAIkC,EAAOZ,EAAGa,OAEd,OADAH,EAAmBE,EAAKR,KACjBQ,GAETP,EAAG,SAAWS,GACZH,GAAS,EACTF,EAAMK,GAERP,EAAG,WACD,IACOG,GAAoC,MAAhBV,EAAW,QAAWA,EAAW,SAC1D,QACA,GAAIW,EAAQ,MAAMF,KCpDX,SAASM,EAAgBC,EAAKxC,EAAKN,GAYhD,OAXIM,KAAOwC,EACTrD,OAAOC,eAAeoD,EAAKxC,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZoD,cAAc,EACdC,UAAU,IAGZF,EAAIxC,GAAON,EAGN8C,ECRM,SAASG,EAAejC,EAAKjC,GAC1C,OCLa,SAAyBiC,GACtC,GAAII,MAAMY,QAAQhB,GAAM,OAAOA,EDIxB,CAAeA,IELT,SAA+BA,EAAKjC,GACjD,GAAsB,qBAAXe,QAA4BA,OAAOiC,YAAYtC,OAAOuB,GAAjE,CACA,IAAIkC,EAAO,GACPC,GAAK,EACLC,GAAK,EACLhB,OAAKiB,EAET,IACE,IAAK,IAAiCC,EAA7BC,EAAKvC,EAAIlB,OAAOiC,cAAmBoB,GAAMG,EAAKC,EAAGZ,QAAQT,QAChEgB,EAAKM,KAAKF,EAAGtD,QAETjB,GAAKmE,EAAKhC,SAAWnC,GAH8CoE,GAAK,IAK9E,MAAOZ,GACPa,GAAK,EACLhB,EAAKG,EACL,QACA,IACOY,GAAsB,MAAhBI,EAAW,QAAWA,EAAW,SAC5C,QACA,GAAIH,EAAI,MAAMhB,GAIlB,OAAOc,GFnBuB,CAAqBlC,EAAKjC,IAAM,EAA2BiC,EAAKjC,IGLjF,WACb,MAAM,IAAIuD,UAAU,6IHIgF,GIHtG,SAASmB,EAAQhD,EAAQiD,GACvB,IAAIC,EAAOlE,OAAOkE,KAAKlD,GAEvB,GAAIhB,OAAOmE,sBAAuB,CAChC,IAAIC,EAAUpE,OAAOmE,sBAAsBnD,GACvCiD,IAAgBG,EAAUA,EAAQC,QAAO,SAAUC,GACrD,OAAOtE,OAAOuE,yBAAyBvD,EAAQsD,GAAKpE,eAEtDgE,EAAKH,KAAKS,MAAMN,EAAME,GAGxB,OAAOF,EAGM,SAASO,EAAeC,GACrC,IAAK,IAAIpF,EAAI,EAAGA,EAAIqF,UAAUlD,OAAQnC,IAAK,CACzC,IAAIsF,EAAyB,MAAhBD,UAAUrF,GAAaqF,UAAUrF,GAAK,GAE/CA,EAAI,EACN0E,EAAQhE,OAAO4E,IAAS,GAAMC,SAAQ,SAAUhE,GAC9C,EAAe6D,EAAQ7D,EAAK+D,EAAO/D,OAE5Bb,OAAO8E,0BAChB9E,OAAO+E,iBAAiBL,EAAQ1E,OAAO8E,0BAA0BF,IAEjEZ,EAAQhE,OAAO4E,IAASC,SAAQ,SAAUhE,GACxCb,OAAOC,eAAeyE,EAAQ7D,EAAKb,OAAOuE,yBAAyBK,EAAQ/D,OAKjF,OAAO6D,E,OCjCF,IAAMM,EAAgB,CAC3B,IAAQ,CAAC,YAAa,aACtB,OAAQ,CAAC,YAAa,aACtB,IAAQ,CAAC,YAAa,aACtB,OAAQ,CAAC,YAAa,aACtB,KAAQ,CAAC,aAAc,cACvB,OAAQ,CAAC,aAAc,cACvB,OAAQ,CAAC,aAAc,cACvB,OAAQ,CAAC,aAAc,cACvB,MAAQ,CAAC,aAAc,cACvB,OAAQ,CAAC,aAAc,eAGV,SAASC,EAAaC,EAAMC,EAAMC,EAASC,GAAS,IAAD,QAC1DC,EAAOJ,EAAKK,MAAMJ,EAAKG,MAC7B,IAAKA,EAAM,OAAO,KAClB,IAAME,EAAUN,EAAKO,YAAL,UAAoBH,EAAKE,QAAzB,YAAoCL,EAAKO,MAAQ,MACjE,IAAKF,EAAS,OAAO,KACrB,IAAMG,EAAST,EAAKU,cAAcJ,EAAQG,QAC1C,IAAKA,EAAQ,OAAO,KACpB,IAAIE,EAAQX,EAAKY,aAAaN,EAAQK,OAChCE,EAAUP,EAAQG,OAAOK,MAAM,UAC/BC,EAAWF,GAAWf,EAAce,EAAQ,IAC9CE,IAAab,EAAQa,EAAS,KAAOb,EAAQa,EAAS,OACxDJ,EAAK,KAAOA,GACRT,EAAQa,EAAS,MAAKJ,EAAMK,QAAUL,EAAMK,QAAU,IAAMH,EAAQ,GAAK,IAAS,IAAO,MACzFX,EAAQa,EAAS,MAAKJ,EAAMM,aAAeN,EAAMM,aAAe,GAAK,MAG3E,IAhBgE,EAgB1DC,EAAO,GAhBmD,IAiB9CT,EAAOU,UAjBuC,IAiBhE,2BAAmC,CAAC,IAAzBC,EAAwB,QACjCF,EAAKrC,KAAK,CAACwC,GAAID,EAAIC,GAAIC,KAAMnB,EAAOiB,EAAIC,KAAO,EAAGL,OAAQI,EAAIG,KAAMC,MAAOJ,EAAIK,OAlBjB,gCAoBhE,KAAOP,EAAK3E,OAAS,GACnB2E,EAAKrC,KAAK,CAACyC,KAAM,EAAGN,OAAQ,EAAGQ,MAAO,IAExC,IAAME,EAAOjB,EAAOkB,WAAY,UAAA3B,EAAK4B,gBAAgBnB,EAAOkB,gBAA5B,eAAsCE,MAAK,SAAArH,GAAC,OAAI2F,EAAO3F,EAAE6G,UAAzD,UAAiErB,EAAK4B,gBAAgBnB,EAAOkB,gBAA7F,aAAiE,EAAuC,KAClIG,EAAM,OAAGJ,QAAH,IAAGA,OAAH,EAAGA,EAAMK,QAAQF,MAAK,SAAAG,GAAE,OAAgB,IAAZA,EAAGC,QACvCH,EAAQZ,EAAKrC,KAAK,CAACwC,GAAIK,EAAKL,GAAIC,KAAMnB,EAAOuB,EAAKL,KAAO,EAAGL,OAAQc,EAAOzG,MAAOmG,MAAO,IACxFN,EAAKrC,KAAK,CAACyC,KAAM,EAAGN,OAAQ,EAAGQ,MAAO,IAG3C,IADA,IAAIU,EAAc,EAClB,MAA2BpH,OAAOqH,SAAa,QAAL,EAAAxB,SAAA,eAAOyB,QAAS3B,EAAO2B,OAAjE,eAAyE,CAAC,IAAD,EAApE,YAAOf,EAAP,KAAWgB,EAAX,KACHH,IAAgB/B,EAAOkB,IAAO,GAAKgB,EAErC,cAA2BvH,OAAOqH,SAAa,QAAL,EAAAxB,SAAA,eAAOO,OAAQZ,EAAQY,MAAjE,eAAwE,CAAC,IAAD,EAAnE,YAAOG,EAAP,KAAWgB,EAAX,KACHH,IAAgB/B,EAAOkB,IAAO,GAAKgB,EAIrC,IADA,IAAMC,EAAY,GACTC,EAAK,EAAGA,GAAMrB,EAAK,GAAGM,QAASe,EACtC,IAAK,IAAIC,EAAK,EAAGA,GAAMtB,EAAK,GAAGM,QAASgB,EACtC,IAAK,IAAIC,EAAK,EAAGA,GAAMvB,EAAK,GAAGM,QAASiB,EACtC,IAAK,IAAIC,EAAK,EAAGA,GAAMxB,EAAK,GAAGM,QAASkB,EAAI,CAC1C,IAAM1B,EAAS2B,KAAKC,IAAInC,EAAOoC,YAAaN,EAAKrB,EAAK,GAAGF,OAASwB,EAAKtB,EAAK,GAAGF,OAASyB,EAAKvB,EAAK,GAAGF,QAAU0B,EAAKxB,EAAK,GAAGF,OACtHM,EAAOiB,EAAKrB,EAAK,GAAGI,KAAOkB,EAAKtB,EAAK,GAAGI,KAAOmB,EAAKvB,EAAK,GAAGI,KAAOoB,EAAKxB,EAAK,GAAGI,OACjFgB,EAAUtB,IAAWM,EAAOgB,EAAUtB,GAAQM,QACjDgB,EAAUtB,GAAU,CAClBM,OACAwB,KAAMP,EACNQ,KAAMP,EACNQ,KAAMP,EACNQ,KAAMP,IAOlB,IAAIQ,EAAQZ,EAAUa,KAAI,SAAC3I,EAAGJ,GAAJ,OAAUI,EAAC,OAAOA,GAAP,IAAUwG,OAAQ5G,IAAK,QAAM+E,OAAOiE,SAClD,IAAnBlD,EAAQmD,OACVH,EAAQ,CAACA,EAAM,IACa,IAAnBhD,EAAQmD,SACjBH,EAAQ,CAACA,EAAMA,EAAM3G,OAAS,KAGhC,IAAM+G,EAAmB,CAAChC,KAAMY,EAAaY,KAAM,EAAGC,KAAM,EAAGC,KAAM,EAAGC,KAAM,EAAGM,WAAY,GACvFC,EAAc/C,EAAOgD,QAAUd,KAAKe,KAAKjD,EAAOgD,QAAUhD,EAAOkD,WAAa,EAE9EC,EAAQ,GAyBd,SAASC,EAAQC,EAAUC,GACzB,GAAIA,GAAgBtD,EAAOuD,UACzB,OAAOV,EAELQ,EAAWN,IAAaM,EAAWN,GACvC,IAAMS,EAAMH,EAAWrD,EAAOuD,UAAYD,EAE1C,OADKH,EAAMK,KAAML,EAAMK,GA9BzB,SAAkBH,EAAUC,GAC1B,IADwC,EACpCG,EAAU,KAD0B,IAErBhB,GAFqB,IAExC,2BAA0B,CAAC,IAAD,EAAfnF,EAAe,QAClBiD,EAASP,EAAO0D,UAAgB,QAAL,EAAAxD,SAAA,eAAOK,SAAU,GAAK2B,KAAKC,IAAInC,EAAOkD,UAAYG,EAAUrD,EAAOgD,SAAW1F,EAAKiD,OAChHM,EAAOY,EAAcnE,EAAKuD,KAC1B8C,EAAU,KAAMC,EAAgB,EAChCrD,EAAS,MACXoD,EAAUP,EAAQC,EAAW,EAAGC,EAAe/C,GAC/CqD,GAAiB,IAAQrD,GAAU,IACnCM,GAAQ8C,EAAQ9C,KAAO+C,KAEpBH,GAAW5C,EAAO4C,EAAQ5C,QACxB4C,IAASA,EAAU,IACxBA,EAAQ5C,KAAOA,EACf4C,EAAQlG,KAAOoG,EACfF,EAAQX,WAAac,EACrBH,EAAQpB,KAAO/E,EAAK+E,KACpBoB,EAAQnB,KAAOhF,EAAKgF,KACpBmB,EAAQlB,KAAOjF,EAAKiF,KACpBkB,EAAQjB,KAAOlF,EAAKkF,OAnBgB,gCAsBxC,OAAOiB,EAQuBI,CAASR,EAAUC,IAC1CH,EAAMK,GAWf,IATA,IAAMM,EAASV,EAAQ5D,EAAKuE,MAAO7B,KAAK8B,MAAsB,IAAhBxE,EAAKyE,WAE7CC,EAAM,CACVzD,KAAM,GACNkB,MAAO,GACPc,MAAO,IAGL0B,EAAY,EAAGC,EAAMN,EA5GuC,cAmH9D,IALA,IAAMxG,EAAO,CACXiD,OAAQ,EAAI6D,EAAItB,WAChBrC,KAAM,GACNkB,MAAO,IAET,MAA2BtH,OAAOqH,SAAa,QAAL,EAAAxB,SAAA,eAAOyB,QAAS3B,EAAO2B,OAAjE,eAAyE,CAAC,IAAD,EAApE,YAAOf,EAAP,KAAWgB,EAAX,KACChB,GAAMgB,IACRtE,EAAKqE,MAAMf,GAAMgB,EACjBsC,EAAIvC,MAAMf,IAAOsD,EAAIvC,MAAMf,IAAO,GAAKgB,EAASuC,GAGpD,SAASE,EAAKzD,EAAIgB,GACZhB,GAAMgB,IACRtE,EAAKmD,KAAKG,GAAMgB,EAChBsC,EAAIzD,KAAKG,IAAOsD,EAAIzD,KAAKG,IAAO,GAAKgB,EAASuC,GAGlD,cAA2B9J,OAAOqH,SAAa,QAAL,EAAAxB,SAAA,eAAOO,OAAQZ,EAAQY,MAAjE,eAAwE,CAAC,IAAD,EAAnE,YACH4D,EADG,WAGLA,EAAK5D,EAAK,GAAGG,GAAIwD,EAAI/B,MACrBgC,EAAK5D,EAAK,GAAGG,GAAIwD,EAAI9B,MACrB+B,EAAK5D,EAAK,GAAGG,GAAIwD,EAAI7B,MACrB8B,EAAK5D,EAAK,GAAGG,GAAIwD,EAAI5B,MACrB0B,EAAIzB,MAAMrE,KAAKd,GACM,IAAjBmC,EAAQ6E,KACLF,EAAItB,aAAYqB,EAAY,GACP,IAAjB1E,EAAQ6E,KACjBH,EAAY,EAEZA,GAAaC,EAAItB,WAEnBsB,EAAMA,EAAI7G,MAjCL6G,GAAM,KAoCb,IAAMG,GAAchF,EAAKO,YAAL,UAAoBH,EAAKE,QAAzB,YAAoCL,EAAKO,MAAQ,IAAM,IACrEyE,GAAaD,IAAehF,EAAKU,cAAcsE,GAAYvE,QAC3DyE,GAAUzE,EAAO0E,MAAiB,OAAVF,SAAU,IAAVA,QAAA,EAAAA,GAAYE,MAAO,GAC3CC,GAAazC,KAAKe,KAAKwB,GAAUzE,EAAOyE,SAAW,IAAU,QAAL,EAAAvE,SAAA,eAAOM,cAAe,GAAK,MAUzF,OATA0D,EAAIU,KAAO,CACTnE,KAAM,GACNkB,OAAK,SACF3B,EAAO6E,SAAWF,IADhB,IAEF3E,EAAO8E,YAAcH,GAAa3E,EAAO+E,aAFvC,IAKPb,EAAIvC,MAAM3B,EAAO6E,WAAaX,EAAIvC,MAAM3B,EAAO6E,WAAa,GAAKF,GACjET,EAAIvC,MAAM3B,EAAO8E,cAAgBZ,EAAIvC,MAAM3B,EAAO8E,cAAgB,GAAKH,GAAa3E,EAAO+E,YACpFb,ECxKT,IAAMc,EAASC,KAEX1F,EAAO,KAEL2F,EAAU,GAEhB,SAASC,EAAQC,GACf,IAAMtB,EAASxE,EAAaC,EAAM6F,EAAK5F,KAAM4F,EAAK3F,QAAS2F,EAAK1F,QAChEsF,EAAOK,YAAY,CAACC,OAAQ,SAAU1E,GAAIwE,EAAKxE,GAAIkD,WAGrDkB,EAAOO,iBAAiB,WAAW,YAAe,IAAZH,EAAW,EAAXA,KACpC,GAAoB,SAAhBA,EAAKE,OAAmB,CAC1B/F,EAAO6F,EAAKI,QADc,UAERN,GAFQ,IAE1B,2BAA2B,CACzBC,EADyB,UAFD,8BAK1BD,EAAQO,OAAO,OACU,aAAhBL,EAAKE,SACV/F,EACF4F,EAAQC,GAERF,EAAQ9G,KAAKgH","file":"static/js/optimizer.worker.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"https://d3planner-assets.maxroll.gg/lost-ark/build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export const estateBuffMap = {\n  100000: ['estateT1c', 'estateT1p'],\n  100001: ['estateT1c', 'estateT1p'],\n  200000: ['estateT2c', 'estateT2p'],\n  200001: ['estateT2c', 'estateT2p'],\n  310000: ['estateT3ac', 'estateT3ap'],\n  310001: ['estateT3ac', 'estateT3ap'],\n  310500: ['estateT3bc', 'estateT3bp'],\n  310501: ['estateT3bc', 'estateT3bp'],\n  311000: ['estateT3cc', 'estateT3cp'],\n  311001: ['estateT3cc', 'estateT3cp'],\n};\n\nexport default function optimizeSync(Data, task, options, prices) {\n  const item = Data.items[task.item];\n  if (!item) return null;\n  const quality = Data.itemQuality[`${item.quality}#${task.level + 100}`];\n  if (!quality) return null;\n  const common = Data.enhanceCommon[quality.common];\n  if (!common) return null;\n  let boost = Data.enhanceBoost[quality.boost];\n  const commonM = quality.common.match(/^(.*)#/);\n  const buffType = commonM && estateBuffMap[commonM[1]];\n  if (buffType && (options[buffType[0]] || options[buffType[1]])) {\n    boost = {...boost};\n    if (options[buffType[0]]) boost.chance = (boost.chance || 0) + (commonM[1] < 300000 ? 2000 : 1000);\n    if (options[buffType[1]]) boost.expDiscount = (boost.expDiscount || 0) + 2000;\n  }\n\n  const mats = [];\n  for (const mat of common.additive) {\n    mats.push({id: mat.id, cost: prices[mat.id] || 0, chance: mat.rate, limit: mat.max});\n  }\n  while (mats.length < 3) {\n    mats.push({cost: 0, chance: 0, limit: 0});\n  }\n  const mat4 = common.special && (Data.enhanceMaterial[common.special]?.find(m => prices[m.id]) || Data.enhanceMaterial[common.special]?.[0]);\n  const mat4fx = mat4?.effects.find(fx => fx.type === 1);\n  if (mat4fx) mats.push({id: mat4.id, cost: prices[mat4.id] || 0, chance: mat4fx.value, limit: 1});\n  else mats.push({cost: 0, chance: 0, limit: 0});\n\n  let attemptCost = 0;\n  for (const [id, amount] of Object.entries(boost?.money || common.money)) {\n    attemptCost += (prices[id] || 0) * amount;\n  }\n  for (const [id, amount] of Object.entries(boost?.mats || quality.mats)) {\n    attemptCost += (prices[id] || 0) * amount;\n  }\n\n  const stepsFull = [];\n  for (let n0 = 0; n0 <= mats[0].limit; ++n0) {\n    for (let n1 = 0; n1 <= mats[1].limit; ++n1) {\n      for (let n2 = 0; n2 <= mats[2].limit; ++n2) {\n        for (let n3 = 0; n3 <= mats[3].limit; ++n3) {\n          const chance = Math.min(common.additiveMax, n0 * mats[0].chance + n1 * mats[1].chance + n2 * mats[2].chance) + n3 * mats[3].chance;\n          const cost = n0 * mats[0].cost + n1 * mats[1].cost + n2 * mats[2].cost + n3 * mats[3].cost;\n          if (!stepsFull[chance] || cost < stepsFull[chance].cost) {\n            stepsFull[chance] = {\n              cost,\n              mat0: n0,\n              mat1: n1,\n              mat2: n2,\n              mat3: n3,\n            };\n          }\n        }\n      }\n    }\n  }\n  let steps = stepsFull.map((m, i) => m ? {...m, chance: i} : null).filter(Boolean);\n  if (options.honing === 0) {\n    steps = [steps[0]];\n  } else if (options.honing === 2) {\n    steps = [steps[steps.length - 1]];\n  }\n\n  const guaranteedResult = {cost: attemptCost, mat0: 0, mat1: 0, mat2: 0, mat3: 0, nextChance: 0};\n  const maxAttempts = common.failMax ? Math.ceil(common.failMax / common.failBonus) : 0;\n\n  const cache = [];\n  function _compute(attempts, failureTotal) {\n    let optimal = null;\n    for (const step of steps) {\n      const chance = common.success + (boost?.chance || 0) + Math.min(common.failBonus * attempts, common.failMax) + step.chance;\n      let cost = attemptCost + step.cost;\n      let failure = null, failureChance = 0;\n      if (chance < 10000) {\n        failure = compute(attempts + 1, failureTotal + chance);\n        failureChance = (10000 - chance) / 10000;\n        cost += failure.cost * failureChance;\n      }\n      if (!optimal || cost < optimal.cost) {\n        if (!optimal) optimal = {};\n        optimal.cost = cost;\n        optimal.next = failure;\n        optimal.nextChance = failureChance;\n        optimal.mat0 = step.mat0;\n        optimal.mat1 = step.mat1;\n        optimal.mat2 = step.mat2;\n        optimal.mat3 = step.mat3;\n      }\n    }\n    return optimal;\n  }\n  function compute(attempts, failureTotal) {\n    if (failureTotal >= common.threshold) {\n      return guaranteedResult;\n    }\n    if (attempts > maxAttempts) attempts = maxAttempts;\n    const pos = attempts * common.threshold + failureTotal;\n    if (!cache[pos]) cache[pos] = _compute(attempts, failureTotal);\n    return cache[pos];\n  }\n  const result = compute(task.fails, Math.floor(task.blessing * 215));\n\n  const out = {\n    mats: {},\n    money: {},\n    steps: [],\n  };\n\n  let curChance = 1, cur = result;\n  while (cur) {\n    const step = {\n      chance: 1 - cur.nextChance,\n      mats: {},\n      money: {},\n    };\n    for (const [id, amount] of Object.entries(boost?.money || common.money)) {\n      if (id && amount) {\n        step.money[id] = amount;\n        out.money[id] = (out.money[id] || 0) + amount * curChance;\n      }\n    }\n    function _mat(id, amount) { // eslint-disable-line no-loop-func\n      if (id && amount) {\n        step.mats[id] = amount;\n        out.mats[id] = (out.mats[id] || 0) + amount * curChance;\n      }\n    }\n    for (const [id, amount] of Object.entries(boost?.mats || quality.mats)) {\n      _mat(id, amount);\n    }\n    _mat(mats[0].id, cur.mat0);\n    _mat(mats[1].id, cur.mat1);\n    _mat(mats[2].id, cur.mat2);\n    _mat(mats[3].id, cur.mat3);\n    out.steps.push(step);\n    if (options.luck === 0) {\n      if (!cur.nextChance) curChance = 0;\n    } else if (options.luck === 2) {\n      curChance = 0;\n    } else {\n      curChance *= cur.nextChance;\n    }\n    cur = cur.next;\n  }\n\n  const prevQuality = Data.itemQuality[`${item.quality}#${task.level + 100 - 1}`];\n  const prevCommon = prevQuality && Data.enhanceCommon[prevQuality.common];\n  const feedExp = common.exp - (prevCommon?.exp || 0);\n  const feedAmount = Math.ceil(feedExp / common.feedExp * (1 - (boost?.expDiscount || 0) / 10000));\n  out.feed = {\n    mats: {},\n    money: {\n      [common.feedType]: feedAmount,\n      [common.feedSubType]: feedAmount * common.feedSubCost,\n    },\n  };\n  out.money[common.feedType] = (out.money[common.feedType] || 0) + feedAmount;\n  out.money[common.feedSubType] = (out.money[common.feedSubType] || 0) + feedAmount * common.feedSubCost;\n  return out;\n}\n","import optimizeSync from './optimizeSync';\n\n/* eslint-disable-next-line no-restricted-globals */\nconst worker = self;\n\nlet Data = null;\n\nconst pending = [];\n\nfunction process(data) {\n  const result = optimizeSync(Data, data.task, data.options, data.prices);\n  worker.postMessage({action: 'result', id: data.id, result});\n}\n\nworker.addEventListener('message', ({ data }) => {\n  if (data.action === 'init') {\n    Data = data.payload;\n    for (const row of pending) {\n      process(row);\n    }\n    pending.splice(0);\n  } else if (data.action === 'optimize') {\n    if (Data) {\n      process(data);\n    } else {\n      pending.push(data);\n    }\n  }\n});\n"],"sourceRoot":""}